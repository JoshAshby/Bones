<!DOCTYPE html>
<html lang="en">
<%= render :_head %>

<body class="o-body__container">
  <aside class="sidebar-container" x-data="{ open: false }" :class="{ '-opened': open }" @nav-toggle.window="open = !open" @click.away="open = false">
    <div class="m-sidebar__header" <%= render :_logo %></div>

    <div class="m-sidebar__content o-sidebar-menu__container">
      <ul class="m-sidebar-menu__list -grow">
        <li class="a-sidebar-menu__list-item">
          <span class="a-menu__header">Repositories</span>
        </li>

        <li class="a-sidebar-menu__list-item">
          <a href="/dashboard" class="o-menu-link__container <% if shared[:breadcrumbs].last == "Dashboard" %>-active<% end %>">
            <span class="m-menu-link__icon -purple"><%= feather_svg "home" %></span>
            <span class="a-menu-link__title">Dashboard</span>
          </a>
        </li>

        <li class="a-sidebar-menu__list-item">
          <a href="/dashboard/repository/create" class="o-menu-link__container <% if shared[:breadcrumbs].last == "Create Repository" %>-active<% end %>">
            <span class="m-menu-link__icon -green"><%= feather_svg "plus" %></span>
            <span class="a-menu-link__title">Create Repository</span>
          </a>
        </li>

        <li class="a-sidebar-menu__list-item">
          <a href="/dashboard/repository/clone" class="o-menu-link__container <% if shared[:breadcrumbs].last == "Clone Repository" %>-active<% end %>">
            <span class="m-menu-link__icon -green"><%= feather_svg "copy" %></span>
            <span class="a-menu-link__title">Clone Repository</span>
          </a>
        </li>

        <li class="a-sidebar-menu__list-item">
          <span class="a-menu__header">Account</span>
        </li>

        <li class="a-sidebar-menu__list-item">
          <a href="/account" class="o-menu-link__container <% if shared[:breadcrumbs].include? "Account" %>-active<% end %>">
            <span class="m-menu-link__icon -gray"><%= feather_svg "user" %></span>
            <span class="a-menu-link__title">Profile</span>
          </a>
        </li>
      </ul>

      <ul class="m-sidebar-menu__list">
        <li class="a-sidebar-menu__list-item o-account-info__item">
          <span class="m-account-info__container">
            <span class="a-account-info__username"><%= shared[:account][:username] %></span>
            <span class="a-account-info__email"><%= shared[:account][:email] %></span>
          </span>
        </li>

        <li class="a-sidebar-menu__list-item">
          <form method="post" action="/account/logout">
            <%= rodauth.csrf_tag("/account/logout") %>

            <button type="submit" class="o-menu-link__container m-menu-link__button">
              <span class="m-menu-link__icon -red"><%= feather_svg "log-out" %></span>
              <span class="a-menu-link__title a-menu_link__button-text">Logout</span>
            </button>
          </form>
        </li>
      </ul>
    </div>
  </aside>

  <main class="o-main__container">
    <%#= render :_header_content %>

    <div class="o-content__container">
      <h1 class="a-content__header"><%= shared[:breadcrumbs].last %></h1>

      <button class="sidebar-toggle" x-data @click="$dispatch('nav-toggle')">Menu</button>

      <div class="m-content__body">
        <div class="a-content__flashes">
          <%= cell(Cells::Flashes, flash).render :list %>
        </div>

        <%= yield %>
      </div>
    </div>

    <footer class="o-footer__container">
      <div class="m-footer__content">
        <p class="a-footer__text">
        Â© <a href="https://joshisa.ninja">Joshua Ashby</a> 2020 - <a href="/credits">Credits</a>
        |
        <a href="https://thenounproject.com/term/dinosaur-skull/347287/">dinosaur skull by Erik Kuroow</a>
        </p>
      </div>
    </footer>
  </main>
</body>
</html>
