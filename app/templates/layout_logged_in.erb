<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=3ewyGm9LAq">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=3ewyGm9LAq">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=3ewyGm9LAq">
  <link rel="manifest" href="/site.webmanifest?v=3ewyGm9LAq">
  <link rel="mask-icon" href="/safari-pinned-tab.svg?v=3ewyGm9LAq" color="#2f527d">
  <link rel="shortcut icon" href="/favicon.ico?v=3ewyGm9LAq">
  <meta name="apple-mobile-web-app-title" content="Bones">
  <meta name="application-name" content="Bones">
  <meta name="msapplication-TileColor" content="#2b5797">
  <meta name="theme-color" content="#ffffff">

  <title>Bones Fossil SCM Hosting</title>

  <link rel="stylesheet" href="/styles.css" />

  <script type="module" src="/alpine.min.js"></script>
  <script nomodule src="/alpine-ie11.min.js" defer></script>

  <%= content_for :head %>
</head>

<body class="o-body__container">
  <aside class="o-sidebar__container">
    <div class="m-sidebar__header" <%= render :_logo %></div>

    <div class="m-sidebar__content o-sidebar-menu__container">
      <ul class="m-sidebar-menu__list -grow">
        <%= render :_sidebar_header, locals: { header: "Repositories" } %>

        <li class="a-sidebar-menu__list-item">
          <a href="/dashboard" class="o-menu-link__container <% if shared[:breadcrumbs].last == "Dashboard" %>-active<% end %>">
            <span class="m-menu-link__icon -purple"><%= feather_svg "home" %></span>
            <span class="a-menu-link__title">Dashboard</span>
          </a>
        </li>

        <li class="a-sidebar-menu__list-item">
          <a href="/dashboard/repository/create" class="o-menu-link__container <% if shared[:breadcrumbs].last == "Create Repository" %>-active<% end %>">
            <span class="m-menu-link__icon -green"><%= feather_svg "plus" %></span>
            <span class="a-menu-link__title">Create Repository</span>
          </a>
        </li>

        <li class="a-sidebar-menu__list-item">
          <a href="/dashboard/repository/clone" class="o-menu-link__container <% if shared[:breadcrumbs].last == "Clone Repository" %>-active<% end %>">
            <span class="m-menu-link__icon -green"><%= feather_svg "copy" %></span>
            <span class="a-menu-link__title">Clone Repository</span>
          </a>
        </li>

        <%= render :_sidebar_header, locals: { header: "Account" } %>

        <li class="a-sidebar-menu__list-item">
          <a href="/account" class="o-menu-link__container <% if shared[:breadcrumbs].include? "Account" %>-active<% end %>">
            <span class="m-menu-link__icon -gray"><%= feather_svg "user" %></span>
            <span class="a-menu-link__title">Profile</span>
          </a>
        </li>
      </ul>

      <ul class="m-sidebar-menu__list">
        <li class="a-sidebar-menu__list-item o-account-info__item">
          <span class="m-account-info__container">
            <span class="a-account-info__username"><%= shared[:account][:username] %></span>
            <span class="a-account-info__email"><%= shared[:account][:email] %></span>
          </span>
        </li>

        <li class="a-sidebar-menu__list-item">
          <form method="post" action="/account/logout">
            <%= rodauth.csrf_tag("/account/logout") %>

            <button type="submit" class="o-menu-link__container m-menu-link__button">
              <span class="m-menu-link__icon -red"><%= feather_svg "log-out" %></span>
              <span class="a-menu-link__title a-menu_link__button-text">Logout</span>
            </button>
          </form>
        </li>
      </ul>
    </div>
  </aside>

  <main class="o-main__container">
    <%#= render :_header_content %>

    <div class="o-content__container">
      <h1 class="a-content__header"><%= shared[:breadcrumbs].last %></h1>

      <div class="m-content__body">
        <div class="a-content__flashes">
          <%= render :_flashes %>
        </div>

        <%= yield %>
      </div>
    </div>

    <footer class="o-footer__container">
      <div class="m-footer__content">
        <p class="a-footer__text">
        Â© <a href="https://joshisa.ninja">Joshua Ashby</a> 2020 - <a href="/credits">Credits</a>
        |
        <a href="https://thenounproject.com/term/dinosaur-skull/347287/">dinosaur skull by Erik Kuroow</a>
        </p>
      </div>
    </footer>
  </main>
</body>
</html>
